<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hs.meetme.coupleinfo.mapper.CoupleInfoMapper">
<select id="coupleInfoSelect" resultType="CoupleInfoVO">
	SELECT C.COUPLE_DATE AS COUPLE_DATE,I.IMG_URL AS IMG_URL
	FROM COUPLE_INFO C,IMG I
	WHERE C.IMG_ID = I.IMG_ID
</select>
<insert id="coupleInfoInsert">
	<selectKey keyProperty="coupleId" resultType="int" order="BEFORE">
		SELECT SEQ_COUPLEINFO.NEXTVAL FROM DUAL
		</selectKey>
	INSERT INTO COUPLEINFO(COUPLE_ID,
                               COUPLE_STATUS,
                               USER_REQUEST,
                               IMG_ID,
                               SUB_TERM,
                               START_DATE)
	VALUES(#{coupleId},
			default,
			#{userRequest},
			default,
			#{subTerm},
			default)
</insert>
<update id="coupleInfoUpdate"> <!-- 커플정보 사용자 insert -->
	UPDATE COUPLEINFO SET(COUPLE_DATE=#{coupleDate},
							IMG_ID=#{imageId})
	WHERE COUPLE_ID=#{coupleId}
</update>
<update id="couplePhotoDefault"> <!-- 대문이미지 초기화 -->
	UPDATE COUPLEINFO SET(IMG_ID=default)
	WHERE COUPLE_ID=#{coupleId}
</update>

</mapper>