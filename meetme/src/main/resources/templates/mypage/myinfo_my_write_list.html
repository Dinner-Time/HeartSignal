<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="~{layout/layout}">
<head>

</head>
<body>	
	<th:block layout:fragment="content">
		<div class="tm-page-wrap mx-auto">
			<section class="p-5 tm-container-outer tm-bg-white">
				<div class="container">
					<div class="row">
	<div class="col-lg-12">
		<h5 class="page-header" th:with="var1='내가 쓴글 리스트(총' +${count}+ '건)'"  th:text="${var1}"></h5>
	</div>
	<!-- /.col-lg-12 -->
						<div class="col-xs-12 mx-auto tm-about-text-wrap text-center">
						  
	<table class="table" id="board">
		<thead>
            <tr>
                <th>분류</th>
                <th>글제목</th>
                <th>날짜</th>
                <th>조회수</th>
                <th>추천수</th>
            </tr>
        </thead>
		<tbody>
          <th:block th:each="board : ${list}">
            <tr>
              <td th:text="${board.postDistinct}"></td>
              <td th:text="${board.postTitle}"></td>
              <td th:text="${#dates.format(board.postUpdated,'yyyy.MM.dd')}"></td>
              <td th:text="${board.hit}"></td>
              <td th:text="${board.postLikeCount}"></td>
            </tr>
          </th:block>

		</tbody>
	</table>
	
	<form id ="actionForm" action="" method="get">
	  <select name = "type">
	    <option value=""  th:selected="${#strings.isEmpty(pageMaker.cri.type)}">선택</option>
	    <option value="D" th:selected="${#strings.equals(pageMaker.cri.type, 'D')}">분류</option>
	    <option value="T" th:selected="${#strings.equals(pageMaker.cri.type, 'T')}">제목</option>
	    <option value="C" th:selected="${#strings.equals(pageMaker.cri.type, 'C')}">내용</option>
	    <option value="TC" th:selected="${#strings.equals(pageMaker.cri.type,'TC')}">제목 또는 내용</option>	  
	  </select>
	  <input name="keyword" th:value="${pageMaker.cri.keyword}">
	  <button class="btn btn-default" onclick="$('[name=pageNum]').val(1)">검색</button>
	  <input type="hidden" name="pageNum" th:value="${pageMaker.cri.pageNum}">
	  <input type="hidden" name="amount" th:value="${pageMaker.cri.amount}">
	</form>

	<div class ="pull-right">
	  <ul class ="pagination">  
	    <li th:if="${pageMaker.prev }" class="paginate_button previous">
	    	<a th:href="${pageMaker.startPage-1}" th:text="'이전'"></a>
	    </li>
	    
	    <th:block th:each="num: ${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}" >
	      <li class="paginate_button">
	      <a th:href="${num}" th:text="${num}"></a>
	      </li>
	    </th:block>
	    
	    <li th:if="${pageMaker.next }" class="paginate_button previous">
	    	<a th:href="${pageMaker.endPage+1}" th:text="'다음'"></a>
	    </li>
	  </ul>
	</div>
							
						</div>
					</div>
				</div>
			</section>
		</div>
	</th:block>
</body>
<th:block layout:fragment="script">
  <script>
  $(function(){

	  //상세보기
      var actionForm = $("#actionForm")
      
/*      $(".move").on("click", function(e){
        e.preventDefault();
        var bno= $(this).attr("href")
        actionForm.append('<input type="hidden" name="bno" value="'+bno+'">')
        actionForm.attr("action","get")
        actionForm.submit();
      }) */
      
      $(".pull-right a").on("click", function(e){
        e.preventDefault(); //a,submit 기본기능 막기
    	var p = $(this).attr("href");
    	$('[name="pageNum"]').val(p);
    	actionForm.submit();
      });
      
  })
  </script>
</th:block>
</html>